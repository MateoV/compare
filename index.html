<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Compare</title>
<link rel="stylesheet" href="leaflet/dist/leaflet.css" />
<link rel="stylesheet" href='reset.css' />
<link rel="stylesheet" href='style.css' />
<script src='jquery.min.js'></script>
<script src='leaflet/dist/leaflet.js'></script>
</head>
<body>
  <div class='map' id='osm'>
  </div>
  <div class='map' id='google'>
  </div>
</body>
</html>

<script>
$(function() {
  var osmLayer = new L.TileLayer(
        'http://a.tile.openstreetmap.org/{z}/{x}/{y}.png', 
        {maxZoom: 18, attribution: 'Map data &copy; 2011 OpenStreetMap contributors.'});
  var osm = new L.Map('osm');
  var h = document.location.hash.replace('#', '').split(',');
  var lat = 30, lng = -96, z = 4;
  if (h[0] && h[1] && h[3]) {
    lat = parseFloat(h[0]);
    lng = parseFloat(h[1]);
    z   = parseFloat(h[2]);
  }
  osm.setView(new L.LatLng(lat, lng), z).addLayer(osmLayer);

  var googleLayer = new L.TileLayer(
        'http://mt1.google.com/vt/lyrs=m@169000000&hl=en&x={x}&y={y}&z={z}&s=',
        {maxZoom: 18, attribution: 'Map data &copy; 2011 OpenStreetMap contributors.'});
  var google = new L.Map('google');
  google.setView(osm.getCenter(), osm.getZoom()).addLayer(googleLayer);

  osm.on('move', function(e) {
    var c = osm.getCenter();
    var z = osm.getZoom();
    document.location.hash = [c.lat, c.lng, z].join(',');
    google.setView(new L.LatLng(c.lat, c.lng), z);
  });
});
</script>
